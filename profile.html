<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="image/icon-web-PhotoRoom.png" type="image/x-icon" />
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="assets/css/content.css">
        <link rel="stylesheet" href="assets/css/responsive.css">
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300&family=Source+Sans+Pro:wght@200&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lobster+Two:ital,wght@1,700&family=Roboto&family=Sansita+Swashed:wght@800;900&family=Sansita:ital@1&family=Source+Sans+Pro:wght@200&display=swap" rel="stylesheet"> 
        <script>
            if (localStorage.id==undefined) {
                window.location.assign("login.html");
            }
        </script>
    </head>
    <body>
        <div class="header-container">
            <div class="slogan">
                Active wear – Active live 
            </div>
            <div class="items">
                <div class="search">
                    <input class="search-input" type="text" placeholder="search">
                    <img src="image/Icon-Search.png">
                </div>
                <div>
                    <a  class="link-page" id="infor" href="profile.html">
                        <div class="sign-in">
                            <img class="items-icon2" src="image/Icon-Sign in.png">
                            <h6 class="items-text">Infor</h6>
                        </div>                        
                    </a>  
                </div> 
                <div>
                    <a class="link-page" id="logOut" href="">
                        <diV  class="sign-up">
                            <img class="items-icon1" src="image/log-out-icon.png">
                            <h6 class="items-text">Log out</h6>
                        </diV>                       
                    </a>                    
                </div>     
                <div class="cart">
                    <label for="input-cart"><img class="cart-icon" src="image/Icon-cart.png"></label>                   
                </div>
            </div>
        </div>
        <div class="header-container-mobile">
            <p class="slogan-Mb">Active wear – Active live </p>
            <a href="storePage.html" class="shop-name-Mb"><p>Sunnyclo</p></a>
            <div class="tool-bar">
                <label for="input-menu" class="menu">
                    <img class="menu-icon" src="image/menu-icon.png" alt="">
                </label>
                <div class="search-Mb">
                    <input class="search-input-Mb" type="text" placeholder="search">
                    <img src="image/Icon-Search.png">
                </div>
                <div class="cart-Mb">
                    <label for="input-cart"><img class="cart-icon" src="image/Icon-cart.png"></label>                   
                </div>
            </div>
        </div>
        <div class="body-container">
            <input type="checkbox" name="" id="input-menu">
            <label for="input-menu" class="overLayout"></label>
            <div class="menu-bar">
                <label for="input-menu">
                    <img class="remove-icon" src="image/delete-icon.png" alt="">
                </label>
                <a href="storePage.html" class="shop-name">
                    Sunnyclo
                </a>
                <div class="product-name">
                    <div><a class="product-item" href="">Tee</a></div>
                    <div><a class="product-item" href="">Hoodie</a></div>
                    <div><a class="product-item" href="">Hoodie zip</a></div>                 
                    <div><a class="product-item" href="">Sweater</a></div>                    
                    <div><a class="product-item" href="">Jacket</a></div>                   
                    <div><a class="product-item" href="">Cardigan</a></div>                   
                    <div><a class="product-item" href="">Shoes</a></div>                   
                    <div><a class="product-item" href="">Bagback</a></div> 
                    <a  class="link-page-Mb" id="infor" href="profile.html">
                        <div class="sign-in">
                            <img class="items-icon2" src="image/Icon-Sign in.png">
                            <h6 class="items-text">Infor</h6>
                        </div>                        
                    </a>
                    <a class="link-page-Mb" id="logOut" href="">
                        <diV  class="sign-up">
                            <img class="items-icon1" src="image/log-out-icon.png">
                            <h6 class="items-text">Log out</h6>
                        </diV>                       
                    </a>   
                </div>
            </div>
            <div class="account-infor">
                <div class="account-header">
                    ACCOUNT INFOR
                    <div class="divider-bar"></div>
                </div>
                <div class="infor-container">
                    <div class="infor">
                        <img src="image/Profile-image.png">
                        <div id="updateProfile" class="infor-header">Your profile</div>
                        <div id="changePassword" class="infor-header">Change password</div>
                    </div>
                    <div class="edit">
                        <div class="edit-profile">Edit profile</div>
                        <div class="edit-type">
                            <input class="edit-input" onchange="activeBtn()" id="name" type="text" placeholder="Name"> 
                            <br>
                            <input class="edit-input" onchange="activeBtn()" id="address" type="text" placeholder="Address">
                            <br>
                            <input class="edit-input" onchange="activeBtn()" id="phone" type="text" placeholder="Phone number">
                            <br>
                            <input class="edit-input" onchange="activeBtn()" id="email" type="text" placeholder="Gmail">
                            <br>
                            <button class="save" onclick="updateProfile()">Save changes</button>
                        </div>
                    </div>
                    <div class="change-pass">
                        <div class="edit-password">Change password</div>
                        <div class="edit-type">
                            <input class="edit-input" id="pass-now" type="password" placeholder="password now"> 
                            <br>
                            <input class="edit-input" id="pass-new" type="password" placeholder="new password">
                            <br>
                            <input class="edit-input" id="confirm" type="password" placeholder="confirm new password">
                            <div class="errNote"></div> 
                            <button class="changePassBtn" onclick="changePass()">Change password</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="checkbox" name="" id="input-cart">
        <label for="input-cart" class="layoutCart"></label> 
        <div class="cart-items">
            <label for="input-cart"><img class="removeIcn" src="image/delete-icon.png" alt=""></label>
            <table>
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Infor of item</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Delete</th>
                    </tr>
                </thead>  
                <tbody>
                    
                </tbody>
            </table>
            <div class="cart-total">
                <p>Total : <span>0</span> VND</p>
            </div>
            <div class="checkout-button">
                <button onclick="success()" class="checkout">CHECKOUT</button>
            </div>
        </div>
        <div class="footer-container">
            <div class="about">
                <p class="footer">About us</p>
                <p>DSC Store - The New Playground 2,<br> Quận 1, Hồ Chí Minh, Việt Nam</p>
            </div>
            <div class="follow">
                <p class="footer">Follow us</p>
                <div class="contact">
                    <a href="https://www.facebook.com/"><img src="image/facebook_icon.png"></a>
                    <a href="https://www.instagram.com/"><img src="image/instagram-icon.png"></a>
                </div>
            </div>
        </div>
        <script>
            var updateInfor = document.querySelector("#updateProfile");
            var passChange = document.querySelector("#changePassword");
            updateInfor.addEventListener('click', function(event) {
                document.querySelector(".change-pass").style.display ="none";
                document.querySelector(".edit").style.display = "flex";
            })
            passChange.addEventListener('click', function(event) {
                document.querySelector(".change-pass").style.display = "flex";
                document.querySelector(".edit").style.display = "none";
            })
        </script>
        <script>
            document.querySelector(".save").disabled = true;
            document.querySelector(".save").style.background = 'rgba(32, 145, 30, 0.5)';
            function activeBtn() {
                document.querySelector(".save").disabled = false;
                document.querySelector(".save").style.background = 'rgba(32, 145, 30, 1)';
            };
        </script>
        <script>
            var logOut = document.querySelectorAll("#logOut");
                logOut.forEach(function(item) {
                item.addEventListener('click', function(event) {
                    delete localStorage.id;
                    window.location.assign("login.html");
                })
            })
        </script>
        <script src="assets/js/profile.js"></script>
        <script>
            fetch(usersAPI+'/'+localStorage.id)
                .then(function(response) {
                    return response.json();
                })
                .then(function(user) {
                    var name = document.querySelector("#name");
                    var phone = document.querySelector("#phone");
                    var address = document.querySelector("#address");
                    var email = document.querySelector("#email");
                    if (user.id == localStorage.id){
                        name.value = `${user.fullname}`;
                        phone.value = `${user.phonenumber}`;
                        if(address.value != undefined) address.value = `${user.address}`;
                        if(email.value != undefined) email.value = `${user.email}`;
                    }
                });
        </script>
        <script src="assets/js/cartStore.js"></script>
        <script>
            function success() {
                var checkOut = document.querySelector('.checkout');
                var newCart = [];
                swal({
                    title: "Thank You",
                    text: "Your order has been successfully completed!",
                    icon: "success",
                    button: "OK",
                });
                clearCart()
                cartTotal()
                userCart = newCart;
                updateAPI(); 
            }
        </script>
    </body>
</html>